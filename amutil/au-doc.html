<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <meta name="generator" content="nico 0.5.1">
    <meta name="theme" content="autumn 0.1">
    <meta name="keywords" content="支付宝,无线前端,web解决方案,前端,mobile">
    <title>AMUtil - alipay mobile javascript kit | AM - 移动Web开放解决方案</title>
    <link rel="stylesheet" href="../static/1140.css"/>
    <link rel="stylesheet" href="../static/wiki.css"/>
    <link rel="stylesheet" href="../static/syntax.css"/>
</head>
<body>
<div class="goTop">
    <span>Go TOP</span>
</div>
<div class="wrap">
    <div class="main">
        <div class="header">
            <div class="slogan row">
                <a href="../default.html"><img src="https://i.alipayobjects.com/i/ecmng/png/201406/2m8Ebk4eZh.png"
                                               class="slogan-logo" alt="alipay"/></a>
                <span>移动Web解决方案</span>
                <button type="button" class="navbar-toggle">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>

            </div>
            <div class="header-nav">
                <div class="navigation row-n">
                    
<ul class="nav">
    <li>
        <a  archiveId = "about"
        href="../about/about.html">
        关于AM </a>
        
    </li>
    
    <li>
        <a  archiveId = "amg"
        href="../amg/dev-guild.html">
        开发指南 </a>
        
        <ul class="nav-sub">
            <li>
                <a href="../amg/dev-guild.html">移动开发规范</a>
            </li>
            
            <li>
                <a href="../amg/mobile-platform-grade.html">移动分级标准</a>
            </li>
            
            <li>
                <a href="../amg/dev-exp-doc.html">移动开发经验谈</a>
            </li>
            
            <li>
                <a href="../amg/website-guild.html">移动建站指南</a>
            </li>
            
            <li>
                <a href="https://github.com/am-team/amDoc/../">Github</a>
            </li>
            
        </ul>
        
    </li>
    
    <li>
        <a  archiveId = "amui"
        href="../amui/about.html">
        AMUI </a>
        
        <ul class="nav-sub">
            <li>
                <a href="../amui/about.html">关于AMUI</a>
            </li>
            
            <li>
                <a href="../anui/nav.html#info.html">接口文档</a>
            </li>
            
        </ul>
        
    </li>
    
    <li>
        <a  class="active"  archiveId = "amutil"
        href="about.html">
        AMUtil </a>
        
        <ul class="nav-sub">
            <li>
                <a href="about.html">关于AMUtil</a>
            </li>
            
            <li>
                <a href="au-doc.html">接口文档</a>
            </li>
            
            <li>
                <a href="https://github.com/am-team/amUtil/../">Github</a>
            </li>
            
        </ul>
        
    </li>
    
    <li>
        <a  archiveId = "amw"
        href="../amw/about.html">
        AMW </a>
        
        <ul class="nav-sub">
            <li>
                <a href="../amw/about.html">关于AMW</a>
            </li>
            
            <li>
                <a href="../amw/aw-doc.html">接口文档</a>
            </li>
            
            <li>
                <a href="https://github.com/am-team/amWidget/../">Github</a>
            </li>
            
        </ul>
        
    </li>
    
    <li>
        <a  archiveId = "H5Container"
        href="../h5container/about.html">
        H5Container </a>
        
        <ul class="nav-sub">
            <li>
                <a href="../h5container/about.html">关于H5Container</a>
            </li>
            
            <li>
                <a href="../h5container/ab-doc.html">Bridge组件（内测中）</a>
            </li>
            
            <li>
                <a href="../h5container/jsapi-doc.html">JSAPI 接口文档</a>
            </li>
            
        </ul>
        
    </li>
    
    <li>
        <a  archiveId = "wiki"
        href="../">
        知识库 </a>
        
        <ul class="nav-sub">
            <li>
                <a href="../wiki/bookmark.html">收藏阁</a>
            </li>
            
        </ul>
        
    </li>
    
    <li>
        <a  archiveId = "issue"
        href="https://github.com/am-team/amWiki/issues/new/../">
        提建议 </a>
        
    </li>
    
    <li>
        <a  archiveId = "joinus"
        href="../amteam/join.html">
        加入我们 </a>
        
    </li>
    
</ul>

                </div>
            </div>
        </div>
        
<div class="row mar">
    <div class="threecol meta">
    </div>
    
 
    <div class="ninecol content">
        <div class="document">
            <div class="post-header">
                <h2 class="document-title">AMUtil - alipay mobile javascript kit</h2>

                <div class="post-meta">
                    <!--<span></span> /-->
                    <time datetime="2014-10-19">2014-10-19</time>
                </div>
            </div>
            <div class="entry-content">
                <p><style>
.content img {
    width:200px;
}
</style></p>
<h2 id="源代码">源代码</h2><p><a href="https://github.com/am-team/amUtil/tree/master/dist">AMUtil源代码地址</a></p>
<h2 id="date">date</h2><p>date提供了获取当前时间戳和格式化指定日期的方法</p>
<h3 id="示例代码">示例代码</h3><p>js</p>
<div class="highlight"><pre><code class="javascript">    <span class="keyword">var</span> date = AU.date;
    <span class="keyword">var</span> d = <span class="keyword">new</span> Date();
    <span class="keyword">var</span> ds = date.format(d,<span class="string">'yy-MM-dd'</span>); <span class="comment">//2014-05-03</span>
    <span class="keyword">var</span> dnow = date.now(); <span class="comment">//返回当前时间戳，如：1403104207894</span></code></pre></div><h3 id="接口列表">接口列表</h3><div class="highlight"><pre><code class="javascript">
    /**
     * 日期格式化方法
     *
     * @memberof AU.date
     * @param {!Date} date - 日期对象
     * @param {?String} formatter - 指定格式化格式 格式说明 y代表年份，M代表月份，d代表天数，h代表时，m代表分，s代表秒
     *
     * @returns {String} - 如果传入格式错误，则返回Invalid Date字符串
     *
     * @desc 日期格式化方法
     *
     * @example
     * var d = new Date();
     * var ds = AU.date.format(d,'yy-MM-dd'); //2014-05-03
     * var ds = AU.date.format(d,'yy/M/d'); //2014/5/3
     * var ds = AU.date.format(d,'yy/MM/d hh:mm:ss'); //2014/5/3 18:31:24
     */
    format: function (date, formatter)

    /**
     * 当前时间时间戳
     *
     * @memberof AU.date
     *
     * @returns {Number}
     *
     * @desc 当前时间时间戳
     *
     * @example
     * var nowStamp= AU.date.now();
     */
    now: function ()</code></pre></div><h3 id="demo">Demo</h3><p><strong>二维码地址</strong></p>
<p><img src="https://i.alipayobjects.com/i/localhost/png/201407/2zkAtpcKS7.png" alt="date demo 二维码"></p>
<p><code>手机观看效果更好</code></p>
<p>查看<a href="../examples/date.html">Demo</a></p>
<h2 id="image">image</h2><p>image提供了将图片文件转为base64编码的方法</p>
<h3 id="示例代码">示例代码</h3><p>js</p>
<div class="highlight"><pre><code class="javascript">    AU.image.toBase64(<span class="string">"abc.png"</span>,<span class="function"><span class="keyword">function</span><span class="params">(base64Data,error)</span>{</span>
        <span class="comment">//返回值base64Data即为结果，如"data:image/png;base64....."，</span>
    })</code></pre></div><h3 id="接口列表">接口列表</h3><div class="highlight"><pre><code class="javascript">    <span class="comment">/**
     * image转换base64编码方法
     *
     * @memberof AU.toBase64
     * @param {!path} path - 图片地址（需要同域,项目目录）
     * @param {!function} callback - 返回数据 callback有两个参数，如除非异常，error为具体的Exception对象，如果非异常的情况，为undefined
     *
     * @desc 图片转换base64编码
     *
     * @example
     * AU.image.toBase64("abc.png",function(base64Data,error){
     *  //data:image/png;base64.....
     * })
     */</span>
     image.toBase64 = <span class="function"><span class="keyword">function</span> <span class="params">(path, callback)</span></span></code></pre></div><h3 id="demo">Demo</h3><p><strong>二维码地址</strong></p>
<p><img src="https://i.alipayobjects.com/i/ecmng/png/201407/30Lzw1F4Q3.png" alt="图片转码测试 demo 二维码"></p>
<p><code>手机观看效果更好</code></p>
<p>查看<a href="../examples/image.html">Demo</a></p>
<h3 id="规则说明">规则说明</h3><ol>
<li>不支持跨域图片的base64编码
2、不支持file形式的图片base64编码<h2 id="storage">storage</h2>storage提供了页面的数据存储的模式，采用了localstorage的机制进行数据存储</li>
</ol>
<h3 id="示例代码">示例代码</h3><p>js</p>
<div class="highlight"><pre><code class="javascript">    <span class="keyword">var</span> storage = AU.storage;
    storage.set(<span class="string">"key1"</span>,<span class="string">"value1"</span>);
    storage.get(<span class="string">"key1"</span>); <span class="comment">//返回value1</span>
    storage.clear();    <span class="comment">//清空所有键值</span>
    storage.getExpiredDate(<span class="string">"key1"</span>)        <span class="comment">//获取key1键值的过期时间</span></code></pre></div><h3 id="接口列表">接口列表</h3><div class="highlight"><pre><code class="javascript">    /**
     *
     * 获取储存内容
     * @param {string} key 存储内容的key值
     * @returns {string|undefined} 返回值为undefined没找到该内容
     *
     * @example
     * var content = AU.storage.get("name");
     *
     * */
    get: function (key)

    /**
     * 设置储存内容
     * @param {string} key 存储的key值，区分大小写
     * @param {*} val 设置的存储数值，除了object对象会做JSON.stringify处理，其他皆会转成string类型
     * @param {?number|date} expire 过期时间,如果是date类型，则是过期日期，如果是number则是过几秒后过期 单位：秒
     *
     * @returns {undefined|object} 成功返回undefined，不成功，返回一个异常对象
     *
     * */
    set: function (key, val, expire)

    /**
     * 删除存储值
     * @param {string} key 储存的键值
     *
     * */
    remove: function (key)

    /**
     * 清空所有键值
     *
     * */
    clear: function ()

    /**
     *
     * 获取过期日期
     * @param {string} key 键值
     * @returns {undefined|date} 如果该key不存在或者没有日期，则返回undefined,否则返回date对象
     *
     * */
    getExpiredDate: function (key)</code></pre></div><h3 id="demo">Demo</h3><p><strong>二维码地址</strong></p>
<p><img src="https://i.alipayobjects.com/i/ecmng/png/201407/30M1hg3eRT.png" alt="storage demo 二维码"></p>
<p><code>手机观看效果更好</code></p>
<p>查看<a href="../examples/storage.html">Demo</a></p>
<h3 id="规则说明">规则说明</h3><ol>
<li>该storage设置的key值和原生的通用，不过要使用过期功能，则必须使用该组件。建议在代码中不要把该组件和原生混用，以便出现不符预期的情况</li>
<li>原生storage如果传入的value为object的时，会转成[object Object]，该组件会对object进行JSON.stringify处理，其他类型皆和原生storage处理一致</li>
<li>该组件的输出value为string，不会强制做JSON.parse，需要使用方根据事情情况，自行处理</li>
<li>该组件对于异常，键值不存在，storage不支持等情况，api的返回皆为undefined</li>
</ol>
<h2 id="string">string</h2><p>string提供了计算字符串长度的方法，中文算两个，英文算一个</p>
<h3 id="示例代码">示例代码</h3><p>js</p>
<div class="highlight"><pre><code class="javascript">    <span class="keyword">var</span> str = <span class="string">"alipay"</span>;
    <span class="keyword">var</span> length = AU.string.getFullLen(str); <span class="comment">//返回字符串str的长度</span></code></pre></div><h3 id="接口列表">接口列表</h3><div class="highlight"><pre><code class="javascript">    <span class="comment">/**
     * 计算字符串长度的方法，中文算两个，英文算一个，特殊字符不算
     *
     * @memberof AU.string
     * @param {!str} str - 需要计算长度的字符串
     *
     * @returns {int|undefined} 如果传入的不是string字符串，一律返回undefined
     *
     * @desc 计算字符串长度的方法
     *
     * @example
     * AU.string.getFullLen($(this).val())
     */</span>
    string.getFullLen = <span class="function"><span class="keyword">function</span> <span class="params">(str)</span></span></code></pre></div><h3 id="demo">Demo</h3><p><strong>二维码地址</strong></p>
<p><img src="https://i.alipayobjects.com/i/ecmng/png/201407/30M3qmQJZf.png" alt="string demo 二维码"></p>
<p><code>手机观看效果更好</code></p>
<p>查看<a href="../examples/string.html">Demo</a></p>
<h2 id="uri">uri</h2><p>uri提供了对url进行对象化以及提供了便捷的方法，更加容易对url进行queryString的操作</p>
<h3 id="示例代码">示例代码</h3><p>js</p>
<div class="highlight"><pre><code class="javascript">    <span class="keyword">var</span> uri = AU.uri;
    <span class="keyword">var</span> url = uri.parse(location.href); <span class="comment">//返回一个uri对象</span>
    uri.setParam(location.href,<span class="string">"name"</span>,<span class="string">"value"</span>); <span class="comment">//返回当前的url并且在queryString上加上name=value的值</span>

    uri.getParam(<span class="string">"http://www.alipay.com?a=b"</span>,<span class="string">"a"</span>);<span class="comment">//返回b</span></code></pre></div><h3 id="接口列表">接口列表</h3><h4 id="uri对象">uri对象</h4><ul>
<li>source：源url</li>
<li>protocol：协议名 http https file</li>
<li>host：域名</li>
<li>port：端口号</li>
<li>query：query string数值</li>
<li>params：query string 对象</li>
<li>hast：hash数值</li>
<li>path：路径</li>
</ul>
<div class="highlight"><pre><code class="javascript">    /**
     * 解析url，将url解析成uri对象
     * @param {string} url url字符串,如果传入的是对象，这不做任何处理，返回
     * @returns {object} uri对象
     * @example
     * AU.uri.parse(location.href);
     * */
    parse: function (url)

    /**
     *
     * 将uri对象转换成string对象
     * @param {object} uri uri对象
     * @returns {string}
     *
     * @example
     * console.log(AU.uri.stringify(uri)); // http://www.alipay.com
     *
     * */
    stringify: function (uri)

    /**
     *
     * 设置queryString的值
     * @param {!string|object} url url字符串或者是uri对象
     * @param {!string|object} name queryString的名字 如果是对象的话，则进行批量设置
     * @param {?string} value queryString的值
     *
     * @returns {string|object} 如果传入的参数是string，则返回string，否则返回uri对象
     *
     * */
    setParam: function (url, name, value)

    /**
     * 获取QueryString的值
     * @param {!string|object} url url字符串或者是uri对象
     * @param {!string} name 需要查找的名称
     * @returns {string|undefined} 如果未找到，则返回undefined
     *
     * */
    getParam: function (url, name)

    /**
     *
     * 删除param中的name
     * @param {string|object} url url字符串或者是uri对象
     * @param {string} name queryString 中的名字
     *
     * @returns {string|object}  如果传入的参数是string，则返回string，否则返回uri对象
     *
     * */
    removeParam: function (url, name)</code></pre></div><h3 id="demo">Demo</h3><p><strong>二维码地址</strong></p>
<p><img src="https://i.alipayobjects.com/i/ecmng/png/201407/30M4zmFqUZ.png" alt="uri demo 二维码"></p>
<p><code>手机观看效果更好</code></p>
<p>查看<a href="../examples/uri.html">Demo</a></p>

            </div>
        </div>
    </div>
</div>

 
 
    </div>
</div>
<div class="footer">
    <div class="grid-990 sitelink fn-clear" coor="sitelink" role="contentinfo">
        <ul class="ui-link fn-clear">
            <!-- XT:支付宝首页/默认频道/支付宝新首页开始:www.alipay.com/i/indexb.vm -->
            <li class="ui-link-item"><a href="http://ab.alipay.com/i/index.htm" target="_blank" title="关于支付宝"
                                        seed="grid990-link" smartracker="on">关于支付宝</a></li>
            <li class="ui-link-item"><a href="http://blog.alipay.com/" target="_blank" title="官方博客"
                                        seed="grid990-linkT1" smartracker="on">官方博客</a></li>
            <li class="ui-link-item"><a href="http://job.alipay.com/index.php" target="_blank" title="诚征英才"
                                        seed="grid990-linkT2" smartracker="on">诚征英才</a></li>
            <li class="ui-link-item"><a href="https://open.alipay.com/index.htm" target="_blank" title="开放平台"
                                        seed="grid990-linkT3" smartracker="on">开放平台</a></li>
            <li class="ui-link-item"><a href="http://ab.alipay.com/i/lianxi.htm" target="_blank" title="联系我们"
                                        seed="grid990-linkT4" smartracker="on">联系我们</a></li>
            <li class="ui-link-item"><a href="http://fun.alipay.com/sitemap/index.htm" target="_blank" title="网站地图"
                                        seed="grid990-linkT5" smartracker="on">网站地图</a></li>
            <li class="ui-link-item"><a href="http://global.alipay.com/ospay/home.htm" target="_blank"
                                        title="International Business" seed="grid990-International-Business"
                                        smartracker="on">International Business</a></li>
            <li class="ui-link-item ui-link-item-last"><a href="http://ab.alipay.com/i/jieshao.htm#en" target="_blank"
                                                          title="About Alipay" seed="grid990-About-Alipay"
                                                          smartracker="on">About Alipay</a></li>
            <!-- XT:支付宝首页/默认频道/支付宝新首页结束:www.alipay.com/i/indexb.vm -->        </ul>
        <ul class="ui-link fn-clear">
            <!-- XT:支付宝首页/默认频道/支付宝新首页开始:www.alipay.com/i/indexb.vm -->
            <li class="ui-link-item"><a href="http://page.1688.com/shtml/about/ali_group1.shtml" target="_blank"
                                        title="阿里巴巴集团" seed="grid990-linkT7" smartracker="on">阿里巴巴集团</a></li>
            <li class="ui-link-item"><a href="http://www.alibaba.com/" target="_blank" title="阿里巴巴国际站"
                                        seed="grid990-linkT8" smartracker="on">阿里巴巴国际站</a></li>
            <li class="ui-link-item"><a href="http://www.1688.com/" target="_blank" title="阿里巴巴中国站"
                                        seed="grid990-linkT9" smartracker="on">阿里巴巴中国站</a></li>
            <li class="ui-link-item"><a href="http://www.aliexpress.com/" target="_blank" title="全球速卖通"
                                        seed="grid990-linkT10" smartracker="on">全球速卖通</a></li>
            <li class="ui-link-item"><a href="http://www.taobao.com/" target="_blank" title="淘宝网" seed="grid990-linkT11"
                                        smartracker="on">淘宝网</a></li>
            <li class="ui-link-item"><a href="http://www.tmall.com/" target="_blank" title="天猫" seed="grid990-linkT12"
                                        smartracker="on">天猫</a></li>
            <li class="ui-link-item"><a href="http://ju.taobao.com" target="_blank" title="聚划算" seed="grid990-linkT13"
                                        smartracker="on">聚划算</a></li>
            <li class="ui-link-item"><a href="http://www.etao.com/?tbpm=t" target="_blank" title="一淘"
                                        seed="grid990-linkT14" smartracker="on">一淘</a></li>
            <li class="ui-link-item"><a href="http://www.alimama.com/index.htm" target="_blank" title="阿里妈妈"
                                        seed="grid990-linkT15" smartracker="on">阿里妈妈</a></li>
            <li class="ui-link-item"><a href="http://trip.taobao.com/" target="_blank" title="淘宝旅行"
                                        seed="grid990-linkT16" smartracker="on">淘宝旅行</a></li>
            <li class="ui-link-item"><a href="http://www.xiami.com/" target="_blank" title="虾米" seed="grid990-linkT17"
                                        smartracker="on">虾米</a></li>
            <li class="ui-link-item"><a href="http://www.aliyun.com/" target="_blank" title="阿里云计算"
                                        seed="grid990-linkT18" smartracker="on">阿里云计算</a></li>
            <li class="ui-link-item"><a href="http://www.yunos.com/" target="_blank" title="云OS" seed="grid990-linkT19"
                                        smartracker="on">云OS</a></li>
            <li class="ui-link-item"><a href="http://www.net.cn/" target="_blank" title="万网" seed="grid990-linkT20"
                                        smartracker="on">万网</a></li>
            <li class="ui-link-item"><a href="https://www.alipay.com/" target="_blank" title="支付宝"
                                        seed="grid990-linkT21" smartracker="on">支付宝</a></li>
            <li class="ui-link-item ui-link-item-last"><a href="https://www.laiwang.com/" target="_blank" title="来往"
                                                          seed="grid990-linkT22" smartracker="on">来往</a></li>
            <!-- XT:支付宝首页/默认频道/支付宝新首页结束:www.alipay.com/i/indexb.vm -->        </ul>
        <ul class="ui-link ui-link-bottom fn-clear">
            <li class="ui-link-item ui-link-item-last">支付宝版权所有 2004-2014 <a
                    href="http://fun.alipay.com/certificate/jyxkz.htm" target="_blank" seed="grid990-linkT6"
                    smartracker="on">ICP证: 浙B2-20120045</a></li>
        </ul>

    </div>
</div>
</body>
<script src="http://static.alipayobjects.com/seajs/1.2.1/sea.js" data-main="../static/global.js"></script>
<script>
    seajs.config({
        alias: {
            "$": 'jquery/jquery/1.7.2/jquery'
        }
    });
    //        seajs.use(['arale/autocomplete/1.2.3/autocomplete','$'], function(AutoComplete,$) {
    //          $('.logo').click(function (e) {
    //              $('body,html').animate({
    //                scrollTop: 0
    //          }, 500);
    //            e.preventDefault();
    //          });
    //            new AutoComplete({
    //                trigger: '#search',
    //                filter:"stringMatch",
    //                dataSource: [
    //"../about/about.html","../amg/dev-exp-doc.html","../amg/dev-guild.html","../amg/mobile-platform-grade.html","../amg/website-guild.html","../amteam/join.html","../amui/about.html","../amui/amui-doc.html","about.html","au-doc.html","../amw/about.html","../amw/aw-doc.html","../default.html","../h5container/ab-doc.html","../h5container/about.html","../h5container/jsapi-doc.html","../wiki/bookmark.html",
    //                ]
    //            }).render().on('itemSelect',function  (data) {
    //              window.location = data.matchKey;
    //            });
    //        });
    //解决nav中包含http或者https时候的bug
    seajs.use("$", function ($) {
//            console.log($);
        $('.nav a').on("click", function (e) {
//            e.preventDefault();
            var link = $(this).attr("href");
//            console.log(link);
            if (link.indexOf("http") == 0) {
                $(this).attr("target", "_blank");
                $(this).attr("href",link.replace("../", ""));
            }
        });
    });
</script>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1252894789'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s23.cnzz.com/z_stat.php%3Fid%3D1252894789%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));</script>
</html>